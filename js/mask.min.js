window.addEventListener("DOMContentLoaded",function(){var a=document.querySelectorAll('input[type="tel"]');Array.prototype.forEach.call(a,function(b){new InputMask({selector:b,layout:b.dataset.mask})})});function InputMask(a){this.el=this.getElement(a.selector);if(!this.el){return console.log("Что-то не так с селектором")}this.layout=a.layout||"+7 (___) ___-__-__";this.maskreg=this.getRegexp();this.setListeners()}InputMask.prototype.getRegexp=function(){var a=this.layout.replace(/_/g,"\\d");a=a.replace(/\(/g,"\\(");a=a.replace(/\)/g,"\\)");a=a.replace(/\+/g,"\\+");a=a.replace(/\s/g,"\\s");return a};InputMask.prototype.mask=function(f){var h=f.target,a=this.layout,b=0,d=a.replace(/\D/g,""),g=h.value.replace(/\D/g,"");if(d.length>=g.length){g=d}h.value=a.replace(/./g,function(e){return/[_\d]/.test(e)&&b<g.length?g.charAt(b++):b>=g.length?"":e});if(f.type=="blur"){var c=new RegExp(this.maskreg);if(!c.test(h.value)){h.value=""}}else{this.setCursorPosition(h.value.length,h)}};InputMask.prototype.setCursorPosition=function(c,b){b.focus();if(b.setSelectionRange){b.setSelectionRange(c,c)}else{if(b.createTextRange){var a=b.createTextRange();a.collapse(true);a.moveEnd("character",c);a.moveStart("character",c);a.select()}}};InputMask.prototype.setListeners=function(){this.el.addEventListener("input",this.mask.bind(this),false);this.el.addEventListener("focus",this.mask.bind(this),false);this.el.addEventListener("blur",this.mask.bind(this),false)};InputMask.prototype.getElement=function(a){if(a===undefined){return false}if(this.isElement(a)){return a}if(typeof a=="string"){var b=document.querySelector(a);if(this.isElement(b)){return b}}return false};InputMask.prototype.isElement=function(a){return a instanceof Element||a instanceof HTMLDocument};